============================= test session starts ==============================
platform darwin -- Python 3.13.2, pytest-8.3.5, pluggy-1.5.0
rootdir: /Users/celine/Research/librarybench
configfile: pyproject.toml
plugins: anyio-4.9.0, json-report-1.5.0, metadata-3.1.1
collected 16 items

test_compression.py F...                                                 [ 25%]
test_endianness.py .......                                               [ 68%]
test_integration.py ..                                                   [ 81%]
test_streaming.py ...                                                    [100%]

=================================== FAILURES ===================================
___________________ test_compression_option_str_compressible ___________________

    def test_compression_option_str_compressible():
        data = 'aaaaaa'  # compressible
        result = compression_option(data)
        assert isinstance(result, (bytes, bytearray))
        # decompress should recover original
>       assert zlib.decompress(result).decode('utf-8') == data
E       zlib.error: Error -3 while decompressing data: incorrect header check

test_compression.py:10: error
--------------------------------- JSON report ----------------------------------
report saved to: report.json
=========================== short test summary info ============================
FAILED test_compression.py::test_compression_option_str_compressible - zlib.e...
========================= 1 failed, 15 passed in 0.03s =========================
