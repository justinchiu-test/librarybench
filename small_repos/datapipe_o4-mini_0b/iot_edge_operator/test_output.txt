=========================================================================== test session starts ============================================================================
platform darwin -- Python 3.13.2, pytest-8.3.5, pluggy-1.5.0
rootdir: /Users/celine/Research/librarybench
configfile: pyproject.toml
plugins: anyio-4.9.0, json-report-1.5.0, timeout-2.4.0, metadata-3.1.1
timeout: 60.0s
timeout method: signal
timeout func_only: False
collected 17 items

test_retry.py ..                                                                                                                                                     [ 11%]
test_metrics.py ...                                                                                                                                                  [ 29%]
test_validator.py ..                                                                                                                                                 [ 41%]
test_processor.py ..                                                                                                                                                 [ 52%]
test_cli.py ..F..                                                                                                                                                    [ 82%]
test_pipeline.py ...                                                                                                                                                 [100%]

================================================================================= FAILURES =================================================================================
__________________________________________________________________________ test_monitor_pipeline ___________________________________________________________________________

capsys = <_pytest.capture.CaptureFixture object at 0x105891e50>

    def test_monitor_pipeline(capsys):
        # ensure some counters
        from pipeline.metrics import create_counter
        create_counter('x').inc()
        runner = CliRunner()
        runner.invoke(cli, ['monitor_pipeline'])
        captured = capsys.readouterr()
>       assert "Counter x: 1" in captured.out
E       AssertionError: assert 'Counter x: 1' in ''
E        +  where '' = CaptureResult(out='', err='').out

test_cli.py:24: AssertionError
--------------------------------------------------------------------------- Captured stdout call ---------------------------------------------------------------------------
Counter test: 0
Counter count: 3
Counter m1: 1
Counter m2: 2
Counter processed: 1
Counter failed: 0
Counter x: 1
------------------------------------------------------------------------------- JSON report --------------------------------------------------------------------------------
report saved to: report.json
========================================================================= short test summary info ==========================================================================
FAILED test_cli.py::test_monitor_pipeline - AssertionError: assert 'Counter x: 1' in ''
======================================================================= 1 failed, 16 passed in 0.13s =======================================================================
