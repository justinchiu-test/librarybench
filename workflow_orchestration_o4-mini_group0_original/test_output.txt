======================================== test session starts ========================================
platform darwin -- Python 3.13.2, pytest-8.3.5, pluggy-1.5.0
rootdir: /Users/celine/Research/librarybench
configfile: pyproject.toml
plugins: anyio-4.9.0, json-report-1.5.0, metadata-3.1.1
collected 26 items / 2 errors

Product_Manager/tests/test_manager.py FFFFFF                                                  [ 23%]
Data_Scientist/tests/test_task.py ....                                                        [ 38%]
Data_Scientist/tests/test_workflow.py ..                                                      [ 46%]
Data_Engineer/test_utils.py .                                                                 [ 50%]
Data_Engineer/test_task.py ....                                                               [ 65%]
Data_Engineer/test_auth.py ..                                                                 [ 73%]
Data_Engineer/test_ui.py FF.                                                                  [ 84%]
Data_Engineer/test_scheduler.py .                                                             [ 88%]
Data_Engineer/test_manager.py ...                                                             [100%]

============================================== ERRORS ===============================================
_ ERROR collecting workflow_orchestration_o4-mini_group0_original/Product_Manager/tests/test_api.py _
ImportError while importing test module '/Users/celine/Research/librarybench/workflow_orchestration_o4-mini_group0_original/Product_Manager/tests/test_api.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
../../../miniconda3/envs/library/lib/python3.13/importlib/__init__.py:88: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
Product_Manager/tests/test_api.py:3: in <module>
    from Product_Manager.task_manager.api import app, manager
Product_Manager/task_manager/api.py:1: in <module>
    from fastapi import FastAPI, HTTPException
E   ModuleNotFoundError: No module named 'fastapi'
_ ERROR collecting workflow_orchestration_o4-mini_group0_original/Data_Scientist/tests/test_api.py __
ImportError while importing test module '/Users/celine/Research/librarybench/workflow_orchestration_o4-mini_group0_original/Data_Scientist/tests/test_api.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
../../../miniconda3/envs/library/lib/python3.13/importlib/__init__.py:88: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
Data_Scientist/tests/test_api.py:2: in <module>
    from Data_Scientist.api import app
Data_Scientist/api.py:1: in <module>
    from flask import Flask, request, jsonify
E   ModuleNotFoundError: No module named 'flask'
============================================= FAILURES ==============================================
______________________________________ test_queue_task_success ______________________________________

    def test_queue_task_success():
>       tm = TaskManager(max_workers=2)
E       TypeError: TaskManager.__init__() got an unexpected keyword argument 'max_workers'

Product_Manager/tests/test_manager.py:6: TypeError
__________________________________ test_retry_failed_then_success ___________________________________

    def test_retry_failed_then_success():
>       tm = TaskManager(max_workers=1)
E       TypeError: TaskManager.__init__() got an unexpected keyword argument 'max_workers'

Product_Manager/tests/test_manager.py:18: TypeError
_________________________________ test_retry_exhausted_sends_alert __________________________________

    def test_retry_exhausted_sends_alert():
>       tm = TaskManager(max_workers=1)
E       TypeError: TaskManager.__init__() got an unexpected keyword argument 'max_workers'

Product_Manager/tests/test_manager.py:33: TypeError
___________________________________________ test_timeout ____________________________________________

    def test_timeout():
>       tm = TaskManager(max_workers=1)
E       TypeError: TaskManager.__init__() got an unexpected keyword argument 'max_workers'

Product_Manager/tests/test_manager.py:47: TypeError
_________________________________________ test_cancel_task __________________________________________

    def test_cancel_task():
>       tm = TaskManager(max_workers=1)
E       TypeError: TaskManager.__init__() got an unexpected keyword argument 'max_workers'

Product_Manager/tests/test_manager.py:58: TypeError
________________________________________ test_schedule_tasks ________________________________________

    def test_schedule_tasks():
>       tm = TaskManager(max_workers=1)
E       TypeError: TaskManager.__init__() got an unexpected keyword argument 'max_workers'

Product_Manager/tests/test_manager.py:71: TypeError
_____________________________________ test_add_and_list_states ______________________________________

    def test_add_and_list_states():
        runner = CliRunner()
        result = runner.invoke(ui.cli, ["add_task", "--token", TOKEN, "task1", "2"])
>       assert result.exit_code == 0
E       assert 2 == 0
E        +  where 2 = <Result SystemExit(2)>.exit_code

Data_Engineer/test_ui.py:17: AssertionError
_____________________________________ test_run_and_list_states ______________________________________

    def test_run_and_list_states():
        runner = CliRunner()
        runner.invoke(ui.cli, ["add_task", "--token", TOKEN, "task2", "1"])
        runner.invoke(ui.cli, ["run", "--token", TOKEN])
        result = runner.invoke(ui.cli, ["list_states", "--token", TOKEN])
>       assert "task2: success" in result.output
E       assert 'task2: success' in "Usage: cli [OPTIONS] COMMAND [ARGS]...\nTry 'cli --help' for help.\n\nError: No such command 'list_states'.\n"
E        +  where "Usage: cli [OPTIONS] COMMAND [ARGS]...\nTry 'cli --help' for help.\n\nError: No such command 'list_states'.\n" = <Result SystemExit(2)>.output

Data_Engineer/test_ui.py:26: AssertionError
-------------------------------------------- JSON report --------------------------------------------
report saved to: report.json
====================================== short test summary info ======================================
FAILED Product_Manager/tests/test_manager.py::test_queue_task_success - TypeError: TaskManager.__i...
FAILED Product_Manager/tests/test_manager.py::test_retry_failed_then_success - TypeError: TaskMana...
FAILED Product_Manager/tests/test_manager.py::test_retry_exhausted_sends_alert - TypeError: TaskMa...
FAILED Product_Manager/tests/test_manager.py::test_timeout - TypeError: TaskManager.__init__() got...
FAILED Product_Manager/tests/test_manager.py::test_cancel_task - TypeError: TaskManager.__init__()...
FAILED Product_Manager/tests/test_manager.py::test_schedule_tasks - TypeError: TaskManager.__init_...
FAILED Data_Engineer/test_ui.py::test_add_and_list_states - assert 2 == 0
FAILED Data_Engineer/test_ui.py::test_run_and_list_states - assert 'task2: success' in "Usage: cli...
ERROR Product_Manager/tests/test_api.py
ERROR Data_Scientist/tests/test_api.py
============================== 8 failed, 18 passed, 2 errors in 2.66s ===============================
