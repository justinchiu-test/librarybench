========================================= test session starts ==========================================
platform darwin -- Python 3.13.2, pytest-8.3.5, pluggy-1.5.0
rootdir: /Users/celine/Research/librarybench
configfile: pyproject.toml
plugins: anyio-4.9.0, json-report-1.5.0, metadata-3.1.1
collected 14 items

test_auth.py ..                                                                                  [ 14%]
test_manager.py ...                                                                              [ 35%]
test_scheduler.py .                                                                              [ 42%]
test_task.py ....                                                                                [ 71%]
test_ui.py FF.                                                                                   [ 92%]
test_utils.py .                                                                                  [100%]

=============================================== FAILURES ===============================================
_______________________________________ test_add_and_list_states _______________________________________

    def test_add_and_list_states():
        runner = CliRunner()
        result = runner.invoke(ui.cli, ["add_task", "--token", TOKEN, "task1", "2"])
>       assert result.exit_code == 0
E       assert 2 == 0
E        +  where 2 = <Result SystemExit(2)>.exit_code

test_ui.py:17: AssertionError
_______________________________________ test_run_and_list_states _______________________________________

    def test_run_and_list_states():
        runner = CliRunner()
        runner.invoke(ui.cli, ["add_task", "--token", TOKEN, "task2", "1"])
        runner.invoke(ui.cli, ["run", "--token", TOKEN])
        result = runner.invoke(ui.cli, ["list_states", "--token", TOKEN])
>       assert "task2: success" in result.output
E       assert 'task2: success' in "Usage: cli [OPTIONS] COMMAND [ARGS]...\nTry 'cli --help' for help.\n\nError: No such command 'list_states'.\n"
E        +  where "Usage: cli [OPTIONS] COMMAND [ARGS]...\nTry 'cli --help' for help.\n\nError: No such command 'list_states'.\n" = <Result SystemExit(2)>.output

test_ui.py:26: AssertionError
--------------------------------------------- JSON report ----------------------------------------------
report saved to: report.json
======================================= short test summary info ========================================
FAILED test_ui.py::test_add_and_list_states - assert 2 == 0
FAILED test_ui.py::test_run_and_list_states - assert 'task2: success' in "Usage: cli [OPTIONS] COMMAN...
===================================== 2 failed, 12 passed in 0.41s =====================================
