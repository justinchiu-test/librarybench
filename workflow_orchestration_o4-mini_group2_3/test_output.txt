======================================== test session starts ========================================
platform darwin -- Python 3.13.2, pytest-8.3.5, pluggy-1.5.0
rootdir: /Users/celine/Research/librarybench
configfile: pyproject.toml
plugins: anyio-4.9.0, json-report-1.5.0, metadata-3.1.1
collected 36 items / 2 errors

Research_Scientist/test_auth.py ...                                                           [  8%]
Research_Scientist/test_scheduler.py .                                                        [ 11%]
Research_Scientist/test_dynamic.py F                                                          [ 13%]
Research_Scientist/test_models.py ...                                                         [ 22%]
Research_Scientist/test_manager.py ...                                                        [ 30%]
Research_Scientist/test_cli.py ..                                                             [ 36%]
Software_Developer/test_task.py ....                                                          [ 47%]
Software_Developer/test_backoff.py ..                                                         [ 52%]
Software_Developer/test_scheduler.py F                                                        [ 55%]
Software_Developer/test_queue.py ..                                                           [ 61%]
DevOpsEngineer/test_retry.py ....                                                             [ 72%]
DevOpsEngineer/test_core.py ...                                                               [ 80%]
DevOpsEngineer/test_alerting.py .                                                             [ 83%]
DevOpsEngineer/test_integration.py .                                                          [ 86%]
DevOpsEngineer/test_manager.py .....                                                          [100%]

============================================== ERRORS ===============================================
___ ERROR collecting workflow_orchestration_o4-mini_group2_3/Software_Developer/test_workflow.py ____
ImportError while importing test module '/Users/celine/Research/librarybench/workflow_orchestration_o4-mini_group2_3/Software_Developer/test_workflow.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
../../../miniconda3/envs/library/lib/python3.13/importlib/__init__.py:88: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
Software_Developer/test_workflow.py:3: in <module>
    from Software_Developer.task_manager.workflow import Workflow, WorkflowManager
E   ImportError: cannot import name 'WorkflowManager' from 'Software_Developer.task_manager.workflow' (/Users/celine/Research/librarybench/workflow_orchestration_o4-mini_group2_3/Software_Developer/task_manager/workflow.py)
______ ERROR collecting workflow_orchestration_o4-mini_group2_3/Software_Developer/test_api.py ______
ImportError while importing test module '/Users/celine/Research/librarybench/workflow_orchestration_o4-mini_group2_3/Software_Developer/test_api.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
../../../miniconda3/envs/library/lib/python3.13/importlib/__init__.py:88: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
Software_Developer/test_api.py:3: in <module>
    from Software_Developer.task_manager.api import app, workflow_manager, scheduler, task_queue
Software_Developer/task_manager/api.py:1: in <module>
    from fastapi import FastAPI, HTTPException
E   ModuleNotFoundError: No module named 'fastapi'
============================================= FAILURES ==============================================
____________________________________ test_dynamic_task_creation _____________________________________

monkeypatch = <_pytest.monkeypatch.MonkeyPatch object at 0x1023796e0>

    def test_dynamic_task_creation(monkeypatch):
        manager = TaskManager()
        # Create a task that generates another task
        parent = Task(id='p1', func=dynamic_creator,
                      args=(manager, 'p1'), priority=2,
                      retry_policy=RetryPolicy())
        monkeypatch.setattr(__import__('time'), 'sleep', lambda x: None)
        manager.add_task(parent)
        manager.run_all()
        # parent should have succeeded
        p = manager.get_task('p1')
        assert p.state == TaskState.SUCCESS
        assert p.result == 'p1_parent'
        # child should exist and be pending, now run it
        c = manager.get_task('p1_child')
        assert c is not None
>       assert c.state == TaskState.PENDING
E       AssertionError: assert <TaskState.SUCCESS: 'success'> == <TaskState.PENDING: 'pending'>
E        +  where <TaskState.SUCCESS: 'success'> = Task(priority=1, id='p1_child', func=<function dynamic_creator.<locals>.new_task at 0x1028fa700>, args=(), kwargs={}, ...olicy(max_retries=0, retry_delay_seconds=0.0), state=<TaskState.SUCCESS: 'success'>, retries_done=0, result='p1_child').state
E        +  and   <TaskState.PENDING: 'pending'> = TaskState.PENDING

Research_Scientist/test_dynamic.py:30: AssertionError
______________________________________ test_schedule_interval _______________________________________

    def test_schedule_interval():
        s = Scheduler()
        ctr = {"n":0}
        s.schedule(0.2, lambda: ctr.__setitem__("n", ctr["n"]+1))
        time.sleep(0.7)
>       s.stop()
E       AttributeError: 'Scheduler' object has no attribute 'stop'

Software_Developer/test_scheduler.py:9: AttributeError
-------------------------------------------- JSON report --------------------------------------------
report saved to: report.json
====================================== short test summary info ======================================
FAILED Research_Scientist/test_dynamic.py::test_dynamic_task_creation - AssertionError: assert <Ta...
FAILED Software_Developer/test_scheduler.py::test_schedule_interval - AttributeError: 'Scheduler' ...
ERROR Software_Developer/test_workflow.py
ERROR Software_Developer/test_api.py
============================== 2 failed, 34 passed, 2 errors in 4.00s ===============================
