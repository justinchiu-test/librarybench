======================================== test session starts ========================================
platform darwin -- Python 3.13.2, pytest-8.3.5, pluggy-1.5.0
rootdir: /Users/celine/Research/librarybench
configfile: pyproject.toml
plugins: anyio-4.9.0, json-report-1.5.0, metadata-3.1.1
collected 14 items

IT_Administrator/test_version.py .                                                            [  7%]
IT_Administrator/test_auth.py ...                                                             [ 28%]
IT_Administrator/test_scheduler.py ...                                                        [ 50%]
IT_Administrator/test_alert.py .                                                              [ 57%]
IT_Administrator/test_workflow.py ..                                                          [ 71%]
IT_Administrator/test_tasks.py .F..                                                           [100%]

============================================= FAILURES ==============================================
____________________________________ test_task_retry_and_failure ____________________________________

    def test_task_retry_and_failure():
        # sample_fail_once fails first, succeeds second
        t = Task(sample_fail_once, name="f1", timeout=1, max_retries=1)
        res = t.run(10)
        assert res == 10
        assert t.attempts == 2
        # now exceed retries
        sample_fail_once._called = False
        t2 = Task(sample_fail_once, name="f2", timeout=1, max_retries=0)
>       with pytest.raises(MaxRetriesExceeded):
E       Failed: DID NOT RAISE <class 'IT_Administrator.it_manager.exceptions.MaxRetriesExceeded'>

IT_Administrator/test_tasks.py:35: Failed
========================================= warnings summary ==========================================
workflow_orchestration_o4-mini_group4_0/IT_Administrator/test_version.py: 3 warnings
workflow_orchestration_o4-mini_group4_0/IT_Administrator/test_workflow.py: 7 warnings
  /Users/celine/Research/librarybench/workflow_orchestration_o4-mini_group4_0/IT_Administrator/it_manager/version.py:13: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    ts = datetime.datetime.utcnow()

workflow_orchestration_o4-mini_group4_0/IT_Administrator/test_scheduler.py::test_schedule_run_pending_once
  /Users/celine/Research/librarybench/workflow_orchestration_o4-mini_group4_0/IT_Administrator/test_scheduler.py:21: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    sched.schedule(t, args=(1,), run_at=datetime.datetime.utcnow(), interval=None)

workflow_orchestration_o4-mini_group4_0/IT_Administrator/test_scheduler.py::test_schedule_run_pending_once
workflow_orchestration_o4-mini_group4_0/IT_Administrator/test_scheduler.py::test_schedule_run_pending_once
workflow_orchestration_o4-mini_group4_0/IT_Administrator/test_scheduler.py::test_schedule_with_interval
workflow_orchestration_o4-mini_group4_0/IT_Administrator/test_scheduler.py::test_schedule_with_interval
workflow_orchestration_o4-mini_group4_0/IT_Administrator/test_scheduler.py::test_schedule_with_interval
workflow_orchestration_o4-mini_group4_0/IT_Administrator/test_scheduler.py::test_scheduler_alert_on_failure
  /Users/celine/Research/librarybench/workflow_orchestration_o4-mini_group4_0/IT_Administrator/it_manager/scheduler.py:86: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    now = datetime.datetime.utcnow()

workflow_orchestration_o4-mini_group4_0/IT_Administrator/test_scheduler.py::test_schedule_with_interval
  /Users/celine/Research/librarybench/workflow_orchestration_o4-mini_group4_0/IT_Administrator/test_scheduler.py:32: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    now = datetime.datetime.utcnow()

workflow_orchestration_o4-mini_group4_0/IT_Administrator/test_scheduler.py::test_scheduler_alert_on_failure
  /Users/celine/Research/librarybench/workflow_orchestration_o4-mini_group4_0/IT_Administrator/test_scheduler.py:49: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    sched.schedule(t, run_at=datetime.datetime.utcnow())

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
-------------------------------------------- JSON report --------------------------------------------
report saved to: report.json
====================================== short test summary info ======================================
FAILED IT_Administrator/test_tasks.py::test_task_retry_and_failure - Failed: DID NOT RAISE <class ...
============================= 1 failed, 13 passed, 19 warnings in 0.60s =============================
